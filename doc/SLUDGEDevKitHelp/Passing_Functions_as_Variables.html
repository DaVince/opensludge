<html>
<head>
<TITLE>Passing Functions as Variables</TITLE>
</head>
<BODY bgcolor=#FFFFFF TEXT=#000000 LINK=#228822 VLINK=#228822 ALINK=#33BB33>
<CENTER><HR COLOR=#000000 VSPACE=1 NOSHADE SIZE=2>
<TABLE WIDTH=292 BORDER=0 CELLPADDING=0 CELLSPACING=0><TR><TD VALIGN=bottom ALIGN=center height=80 width=292 background="images/sludgepale.gif"><FONT FACE=arial color=#DD0000 SIZE=+1><B>Passing Functions as Variables</B><BR></FONT></TABLE><HR COLOR=#000000 VSPACE=1 NOSHADE SIZE=2>
</center><IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=15><BR>
A variable can be used to hold a number, a line of text, an object type... and a function. This is useful if you have a large number of functions which should all be called in the same way... for example, the functions which are used to set up the scenes of your game.<BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
Rather than having a program defined as follows...<BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<FONT color=#BB4444><TT><B>var lastRoom;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# The room we just came from (string)</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>var thisRoom;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# The room we're in now (string)</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<FONT color=#BB4444><TT><B>sub goToDiningRoom () {</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;removeAllCharacters ();</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;removeScreenRegions ();</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;lastRoom = thisRoom;</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;thisRoom = &quot;dining room&quot;;</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;completeTimers ();</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;addOverlay ('diningRoom.tga', 0, 0);</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;setFloor ('diningRoom.flo');</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;# More dining room initialisation here</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>}</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<FONT color=#BB4444><TT><B>sub goToLounge () {</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;removeAllCharacters ();</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;removeScreenRegions ();</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;lastRoom = thisRoom;</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;thisRoom = &quot;lounge&quot;;</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;completeTimers ();</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;addOverlay ('lounge.tga', 0, 0);</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;setFloor ('lounge.flo');</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;# More lounge initialisation here</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>}</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
It would be beneficial to have a number of rooms and one function for changing between them.<BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<FONT color=#BB4444><TT><B>var lastRoom;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# The room we just came from (function handle)</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>var thisRoom;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# The room we're in now (function handle)</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<FONT color=#BB4444><TT><B>sub goToRoom (newRoom) {</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;removeAllCharacters ();</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;removeScreenRegions ();</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;lastRoom = thisRoom;</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;thisRoom = newRoom;</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;completeTimers ();</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;newRoom ();</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>}</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<FONT color=#BB4444><TT><B>sub diningRoom () {</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;addOverlay ('diningRoom.tga', 0, 0);</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;setFloor ('diningRoom.flo');</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;# More dining room initialisation here</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>}</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<FONT color=#BB4444><TT><B>sub lounge () {</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;addOverlay ('lounge.tga', 0, 0);</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;setFloor ('lounge.flo');</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;# More lounge initialisation here</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>}</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
You can see that, at the end of the goToRoom sub, newRoom can be called just like a function even though it's actually a variable. This is because if your program was to include a line such as<BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<FONT color=#BB4444><TT><B>goToRoom (lounge);</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
...the value of newRoom would be a pointer to the lounge function. Therefore, the lounge function would be called. You can even pass pointers to functions which take variables, although there are probably very few situations where you would want to...<BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<FONT color=#BB4444><TT><B>sub doRepeatingMaths (number, mathFunc, mathSign) {</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;var total = number;</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;var newTotal;</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;for (var a = 0; a &lt; 5; a ++) {</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;newTotal = mathFunc (total, number);</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say (ego, total + mathSign + number + &quot; = &quot; + newTotal);</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;total = newTotal;</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>&nbsp;&nbsp;&nbsp;}</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>}</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<FONT color=#BB4444><TT><B>sub minus (a, b)&nbsp;&nbsp;&nbsp;{ return a - b; }</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<FONT color=#BB4444><TT><B>sub plus (a, b)&nbsp;&nbsp;&nbsp;{ return a + b; }</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<FONT color=#BB4444><TT><B>sub times (a, b)&nbsp;&nbsp;&nbsp;{ return a * b; }</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
Using the above code, a call to doRepeatingMaths (2, plus, &quot;+&quot;) would make the ego character say the following:<BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
2+2 = 4<BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
4+2 = 6<BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
6+2 = 8<BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
8+2 = 10<BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
10+2 = 12<BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
A call to doRepeatingMaths (3, times, &quot;*&quot;) would make the ego character say:<BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
3*3 = 9<BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
9*3 = 27<BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
27*3 = 81<BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
81*3 = 243<BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
243*3 = 729<BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=15><BR>
<FONT FACE=arial color=#3A8F8B SIZE=+1><B>See also:</B></FONT><BR>

<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=13><BR>
<b><a href="Variables.html">Variables</a></b><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<b><a href="onFocusChange.html">onFocusChange</a></b><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<b><a href="onKeyboard.html">onKeyboard</a></b><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<b><a href="onLeftMouse.html">onLeftMouse</a></b><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<b><a href="onMoveMouse.html">onMoveMouse</a></b><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<b><a href="onRightMouse.html">onRightMouse</a></b><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<B><FONT SIZE=1>SLUDGE and this SLUDGE documentation are <A HREF="Copyright.html">copyright</A> Hungry Software 2000-2006</FONT></B>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<HR COLOR=#000000 VSPACE=1 NOSHADE SIZE=2>
</BODY>
</html>
