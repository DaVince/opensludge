<html>
<head>
<TITLE>setBackgroundEffect and doBackgroundEffect</TITLE>
</head>
<BODY bgcolor=#FFFFFF TEXT=#000000 LINK=#228822 VLINK=#228822 ALINK=#33BB33>
<CENTER><HR COLOR=#000000 VSPACE=1 NOSHADE SIZE=2>
<TABLE WIDTH=292 BORDER=0 CELLPADDING=0 CELLSPACING=0><TR><TD VALIGN=bottom ALIGN=center height=80 width=292 background="images/sludgepale.gif"><FONT FACE=arial color=#DD0000 SIZE=+1><B>setBackgroundEffect and doBackgroundEffect</B><BR></FONT></TABLE><HR COLOR=#000000 VSPACE=1 NOSHADE SIZE=2>
</center><IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=20><BR>
<FONT FACE=arial color=#3A8F8B SIZE=+1><B>Syntax:</B></FONT><BR>

<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=13><BR>
<font color=#BB4444 SIZE=+2><TT><B>setBackgroundEffect (<i>add, divide, array [, array...]</i>);</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<font color=#BB4444 SIZE=+2><TT><B>doBackgroundEffect ();</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=15><BR>
<FONT FACE=arial color=#3A8F8B SIZE=+1><B>Purpose:</B></FONT><BR>

<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=13><BR>
The setBlankColour function is used to specify an effect which can be applied to the background image. The doBackgroundEffect function applies the current effect to the background. The parameters for the function are an <i>add</i> value, a <i>divide</i> value and one or more arrays (which you can think of as a matrix, should you wish). When an effect is applied, the following procedure happens for each pixel: SLUDGE adds up the colour values of each pixel and its surrounding pixels, weighted using the arrays you've specified. For example, if you specified one array, containing just the value 1, it would get the original red, green and blue values of that pixel. If you specified one array, containing the values 1 three times, it would get red, green and blue totals equivalent to the red, green and blue values of the pixel itself, plus the red, green and blue values of the pixels either side. These values are then divided by the <i>divide</i> value and finally the <i>add</i> value is added to each. These red, green and blue values are then used as the new colour for the pixel (clamped to the range 0 to 255). So to get an average of each pixel and it's left-hand and right-hand neighbours, you could say setBackgroundEffect (0, 3, newStack (1, 1, 1)). If multiple arrays are specified, these are used to also add the red, green and blue values from pixels the line above or below the pixel having its colour changed.<BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=15><BR>
<FONT FACE=arial color=#3A8F8B SIZE=+1><B>Return value:</B></FONT><BR>

<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=13><BR>
No return values.<BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=15><BR>
<FONT FACE=arial color=#3A8F8B SIZE=+1><B>Example:</B></FONT><BR>

<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=13><BR>
<FONT color=#BB4444><TT><B># Exactly the same as darkBackground - sets each pixel to half its current red, green and blue values</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>setBackgroundEffect (0, 2, newStack (1));</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<FONT color=#BB4444><TT><B># Negative - sets each pixel to 255 minus its current red, green and blue values</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>setBackgroundEffect (255, 1, newStack (-1));</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<FONT color=#BB4444><TT><B># Double vision - each pixel becomes the average of two pixels 13 pixels apart</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>setBackgroundEffect (0, 2, newStack (1,0,0,0,0,0,0,0,0,0,0,0,1));</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<FONT color=#BB4444><TT><B># Soften - take a weighted average of pixels surrounding each pixel</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>setBackgroundEffect (0, 14, newStack (1,2,1), newStack (2,2,2), newStack (1,2,1));</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<FONT color=#BB4444><TT><B># Brighten</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>setBackgroundEffect (10, 7, newStack (8));</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<FONT color=#BB4444><TT><B># Emboss</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>setBackgroundEffect (128, 2, newStack (1,0), newStack(0,-1));</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<FONT color=#BB4444><TT><B># Colour emboss</B></TT></FONT><BR>
<FONT color=#BB4444><TT><B>setBackgroundEffect (32, 2, newStack (1,0,0), newStack (0,2,0), newStack(0,0,-2));</B></TT></FONT><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=15><BR>
<FONT FACE=arial color=#3A8F8B SIZE=+1><B>See also:</B></FONT><BR>

<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=13><BR>
<b><a href="The_Background_Image.html">The Background Image</a></b><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<b><a href="darkBackground.html">darkBackground</a></b><BR>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<B><FONT SIZE=1>SLUDGE and this SLUDGE documentation are <A HREF="Copyright.html">copyright</A> Hungry Software 2000-2006</FONT></B>
<IMG SRC="images/blank.gif" WIDTH=1 HEIGHT=10><BR>
<HR COLOR=#000000 VSPACE=1 NOSHADE SIZE=2>
</BODY>
</html>
